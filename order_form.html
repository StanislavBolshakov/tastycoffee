
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Tasty Coffee</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root{
      --surface:#ffffff;
      --on-surface:#1f2937;
      --primary:#1e88e5;
      --primary-contrast:#ffffff;
      --muted:#6b7280;
      --radius:12px;
      --elev-1: 0 1px 2px rgba(16,24,40,0.05), 0 1px 3px rgba(16,24,40,0.06);
      --elev-2: 0 6px 18px rgba(16,24,40,0.08);
    }

    /* Global layout */
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{background:#f3f4f6;color:var(--on-surface);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
    
    /* Container with padding for scrolling past bottom bars */
    .container{max-width:960px;margin:20px auto;padding:16px;padding-bottom: 40px;box-sizing:border-box;}

    header{display:flex;align-items:center;gap:16px;margin-bottom:18px;}
    .brand{display:flex;flex-direction:column;}
    h1{margin:0;font-size:22px;color:var(--on-surface);font-weight:700;}
    
    /* User Greeting */
    #userName { font-size: 15px; color: var(--muted); margin-bottom: 16px; font-weight: 500; }

    /* Card-like details */
    details{background:var(--surface);border-radius:var(--radius);box-shadow:var(--elev-1);overflow:hidden;margin-bottom:12px;border:1px solid rgba(16,24,40,0.04);}
    summary{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer;list-style:none;font-weight:600;color:var(--on-surface);font-size:15px;}
    summary:hover{background:rgba(30,136,229,0.03);}
    
    /* Custom marker/arrow */
    summary::-webkit-details-marker { display: none; }
    summary:after { content: "+"; font-size: 18px; color: var(--primary); font-weight: bold; }
    details[open] summary:after { content: "‚àí"; }

    /* Product row */
    .product{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-top:1px solid rgba(16,24,40,0.03);gap:12px;flex-wrap:wrap;background:transparent;}
    .product:first-of-type{border-top:0;}
    .product .left{display:flex;flex-direction:column;gap:6px;min-width:0;flex:1;}
    .product h4{margin:0;font-size:15px;font-weight:600;color:var(--on-surface);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .product .metaSmall{color:var(--muted);font-size:13px;}

    /* Right side (Price, Grind, Buttons) */
    .product .right{
        display:flex;
        align-items:center;
        gap:12px;
        flex-shrink:0;
        min-width:160px;
        justify-content:flex-end;
        flex-wrap: wrap; 
    }
    
    .price{font-weight:700;color:var(--primary);background:linear-gradient(90deg, rgba(30,136,229,0.12), rgba(30,136,229,0.06));padding:6px 10px;border-radius:10px; white-space: nowrap;}
    .original-price{font-size:13px;color:var(--muted);text-decoration:line-through;margin-left:8px;}

    /* Grind select */
    .grind-select { margin-right: 4px; }
    .grind-select select{padding:8px 10px;border-radius:8px;border:1px solid rgba(16,24,40,0.06);background:transparent;color:var(--on-surface);font-size:13px; max-width: 160px;}

    /* Quantity */
    .quantity{display:inline-flex;align-items:center;border-radius:999px;overflow:hidden;border:1px solid rgba(16,24,40,0.06);box-shadow:var(--elev-1); background: #fff;}
    .quantity button{border:0;background:transparent;padding:8px 12px;cursor:pointer;font-weight:700;color:var(--primary); min-width: 32px;}
    .quantity span{display:inline-block;padding:6px 4px;background:transparent;min-width:24px;text-align:center;font-weight:600;}

    /* Cart & Comment */
    #cart{margin-top:18px;background:var(--surface);padding:16px;border-radius:12px;box-shadow:var(--elev-2);border:1px solid rgba(16,24,40,0.04);}
    #cart h2{margin:0 0 12px 0;font-size:16px;color:var(--on-surface);}
    .cart-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed rgba(16,24,40,0.03);font-size:14px;color:var(--on-surface);}
    .cart-item:last-child{border-bottom:0;}

    .comment-box { margin-top: 16px; margin-bottom: 8px; }
    .comment-box label { display: block; font-size: 14px; font-weight: 600; color: var(--on-surface); margin-bottom: 6px; }
    .comment-box textarea {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid rgba(16,24,40,0.1);
        background: #fbfdff;
        font-family: inherit;
        font-size: 14px;
        resize: vertical;
        box-sizing: border-box;
        color: var(--on-surface);
    }
    .comment-box textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(30,136,229,0.1); }

    /* Compact Total Row */
    .total-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 16px;
        margin-bottom: 16px;
        font-size: 16px;
        font-weight: 700;
        color: var(--on-surface);
        border-top: 2px solid rgba(0,0,0,0.05);
        padding-top: 12px;
    }
    .total-value { color: var(--primary); font-size: 18px; }

    /* Buttons */
    .btn{display:block;padding:14px 16px;border-radius:10px;border:0;font-weight:700;cursor:pointer;font-size:16px; width: 100%; text-align:center;}
    #submitBtn{background:var(--primary);color:var(--primary-contrast);box-shadow:0 6px 18px rgba(30,136,229,0.12); transition: all 0.2s;}
    #submitBtn:disabled{opacity:0.5;cursor:not-allowed;box-shadow:none;background:linear-gradient(180deg,#a9c8f8,#7db5f7);color:#fff;}
    #clearBtn{background:transparent;border:1px solid rgba(16,24,40,0.06);color:var(--muted);margin-top:12px;}

    /* Footer */
    .footer { text-align: center; margin-top: 32px; color: var(--muted); font-size: 12px; opacity: 0.7; }
    .footer a { color: var(--muted); text-decoration: none; border-bottom: 1px dashed var(--muted); }

    /* Responsive */
    @media (max-width:640px){
      .product{flex-direction:column;align-items:flex-start;}
      .product .right{width:100%;justify-content:space-between;margin-top:8px;}
      .grind-select { width: 100%; order: -1; margin-bottom: 8px; }
      .grind-select select { width: 100%; max-width: none; }
      summary{padding:12px;}
    }
  </style>
</head>
<body>
  <main class="container">
    <header>
      <div class="brand">
        <h1>‚òï Tasty Coffee</h1>
      </div>
    </header>

    <div id="userName"></div>

    <section id="menu"></section>

    <article id="cart" role="region" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
      <h2>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
      <ul id="cart_list" role="list" style="padding:0;margin:0;list-style:none;"></ul>
      
      <div class="comment-box" id="commentContainer" style="display:none;">
          <label for="orderComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É:</label>
          <textarea id="orderComment" rows="2" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∫–æ–¥ –¥–æ–º–æ—Ñ–æ–Ω–∞, –ø–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –¥–æ—Å—Ç–∞–≤–∫–µ..."></textarea>
      </div>

      <div class="total-row">
          <span>–ò—Ç–æ–≥–æ:</span>
          <span class="total-value"><span id="total">0</span> ‚ÇΩ</span>
      </div>

      <button id="submitBtn" disabled class="btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      <button id="clearBtn" onclick="clearCart()" style="display:none;" class="btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
    </article>

    <footer class="footer">
        Author Stanislav Bolshakov (tg: <a href="https://t.me/delirium">@delirium</a>)
    </footer>
  </main>

  <script>
    const menuData = {"CHRISTMAS EDITION": {"–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∫–æ—Ñ–µ": [{"name": "Christmas Blend", "type": "bean_coffee", "weight": 250, "price_original": 668, "discount": 30, "price_final": 467}, {"name": "Christmas Blend", "type": "ground_coffee", "weight": 250, "price_original": 668, "discount": 30, "price_final": 467}], "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Ç–æ–≤–∞—Ä—ã": [{"name": "–î—Ä–∏–ø-–ø–∞–∫–µ—Ç—ã Christmas", "type": null, "weight": 93, "price_original": 240, "discount": 0, "price_final": 240}, {"name": "–ö–∞–ø—Å—É–ª—ã Nespresso Christmas, 10 —à—Ç", "type": null, "weight": 80, "price_original": 300, "discount": 0, "price_final": 300}]}, "–ß–∞–π": {"–ß–µ—Ä–Ω—ã–π —á–∞–π": [{"name": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –∑–∞–≤—Ç—Ä–∞–∫", "type": null, "weight": 100, "price_original": 225, "discount": 0, "price_final": 225}, {"name": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –∑–∞–≤—Ç—Ä–∞–∫", "type": null, "weight": 250, "price_original": 450, "discount": 0, "price_final": 450}, {"name": "–ò–Ω–¥–∏—è –ê—Å—Å–∞–º –î–∏–∂—É", "type": null, "weight": 250, "price_original": 500, "discount": 0, "price_final": 500}, {"name": "–ò–Ω–¥–∏—è –ê—Å—Å–∞–º –î–∏–∂—É", "type": null, "weight": 100, "price_original": 225, "discount": 0, "price_final": 225}, {"name": "–ö–µ–Ω–∏—è –ö–µ—Ä–∏—á–æ", "type": null, "weight": 100, "price_original": 190, "discount": 0, "price_final": 190}, {"name": "–ö–µ–Ω–∏—è –ö–µ—Ä–∏—á–æ", "type": null, "weight": 250, "price_original": 400, "discount": 0, "price_final": 400}, {"name": "–¶–µ–π–ª–æ–Ω –ù—É–≤–∞—Ä–∞ –≠–ª–∏—è", "type": null, "weight": 250, "price_original": 450, "discount": 0, "price_final": 450}, {"name": "–¶–µ–π–ª–æ–Ω –ù—É–≤–∞—Ä–∞ –≠–ª–∏—è", "type": null, "weight": 100, "price_original": 200, "discount": 0, "price_final": 200}, {"name": "–¶–µ–π–ª–æ–Ω –†—É—Ö—É–Ω–∞", "type": null, "weight": 250, "price_original": 420, "discount": 0, "price_final": 420}, {"name": "–¶–µ–π–ª–æ–Ω –†—É—Ö—É–Ω–∞", "type": null, "weight": 100, "price_original": 195, "discount": 0, "price_final": 195}, {"name": "–Æ–Ω–Ω–∞–Ω—å –ò–º–ø–µ—Ä–∏–∞–ª", "type": null, "weight": 100, "price_original": 165, "discount": 0, "price_final": 165}, {"name": "–Æ–Ω–Ω–∞–Ω—å –ò–º–ø–µ—Ä–∏–∞–ª", "type": null, "weight": 250, "price_original": 345, "discount": 0, "price_final": 345}], "–ß–µ—Ä–Ω—ã–π —á–∞–π —Å –¥–æ–±–∞–≤–∫–∞–º–∏": [{"name": "–ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Å–æ —Å–ø–µ—Ü–∏—è–º–∏", "type": null, "weight": 250, "price_original": 475, "discount": 0, "price_final": 475}, {"name": "–ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Å–æ —Å–ø–µ—Ü–∏—è–º–∏", "type": null, "weight": 100, "price_original": 220, "discount": 0, "price_final": 220}, {"name": "–í–∏—à–Ω—ë–≤—ã–π", "type": null, "weight": 100, "price_original": 250, "discount": 0, "price_final": 250}, {"name": "–í–∏—à–Ω—ë–≤—ã–π", "type": null, "weight": 250, "price_original": 550, "discount": 0, "price_final": 550}, {"name": "–ú–∞—Å–∞–ª–∞", "type": null, "weight": 100, "price_original": 170, "discount": 0, "price_final": 170}, {"name": "–§—Ä—É–∫—Ç–æ–≤–∞—è —Å–º–µ—Å—å", "type": null, "weight": 100, "price_original": 195, "discount": 0, "price_final": 195}, {"name": "–§—Ä—É–∫—Ç–æ–≤–∞—è —Å–º–µ—Å—å", "type": null, "weight": 250, "price_original": 435, "discount": 0, "price_final": 435}, {"name": "–ß–∞–π —Å —á–∞–±—Ä–µ—Ü–æ–º", "type": null, "weight": 250, "price_original": 365, "discount": 0, "price_final": 365}, {"name": "–ß–∞–π —Å —á–∞–±—Ä–µ—Ü–æ–º", "type": null, "weight": 100, "price_original": 170, "discount": 0, "price_final": 170}, {"name": "–ß—ë—Ä–Ω–∞—è —Å–º–æ—Ä–æ–¥–∏–Ω–∞", "type": null, "weight": 250, "price_original": 425, "discount": 0, "price_final": 425}, {"name": "–≠—Ä–ª –ì—Ä–µ–π", "type": null, "weight": 100, "price_original": 170, "discount": 0, "price_final": 170}, {"name": "–≠—Ä–ª –ì—Ä–µ–π", "type": null, "weight": 250, "price_original": 365, "discount": 0, "price_final": 365}], "Specialty tea": [{"name": "–ë–∞–π –•–∞–æ –ò–Ω—å –ß–∂–µ–Ω—å, 50 –≥", "type": null, "weight": 50, "price_original": 810, "discount": 0, "price_final": 810}, {"name": "–õ—É–Ω –¶–∑–∏–Ω, 50 –≥", "type": null, "weight": 50, "price_original": 780, "discount": 0, "price_final": 780}, {"name": "–ú–∞—Ç—á–∞ –ì—Ä–µ–π–¥ SG, 50 –≥", "type": null, "weight": 50, "price_original": 860, "discount": 0, "price_final": 860}, {"name": "–ü—É—ç—Ä –ì—É–Ω—Ç–∏–Ω, 75 –≥", "type": null, "weight": 75, "price_original": 780, "discount": 0, "price_final": 780}, {"name": "–¢–µ –ì—É–∞–Ω—å –ò–Ω—å, 75 –≥", "type": null, "weight": 75, "price_original": 950, "discount": 0, "price_final": 950}, {"name": "–•—ç–π –¶–∑–∏–Ω—å –°—è–æ –ß–∂—É–Ω, 100 –≥", "type": null, "weight": 100, "price_original": 1415, "discount": 0, "price_final": 1415}, {"name": "–ß–∂–µ–Ω—å –®–∞–Ω—å –°—è–æ –ß–∂—É–Ω, 75 –≥", "type": null, "weight": 75, "price_original": 855, "discount": 0, "price_final": 855}], "–ó–µ–ª–µ–Ω—ã–π —á–∞–π": [{"name": "–ì–∞–Ω–ø–∞—É–¥–µ—Ä", "type": null, "weight": 250, "price_original": 295, "discount": 0, "price_final": 295}, {"name": "–ì–∞–Ω–ø–∞—É–¥–µ—Ä", "type": null, "weight": 100, "price_original": 155, "discount": 0, "price_final": 155}, {"name": "–ú–∞—Ç—á–∞", "type": null, "weight": 250, "price_original": 1585, "discount": 0, "price_final": 1585}, {"name": "–ú–∞—Ç—á–∞", "type": null, "weight": 100, "price_original": 660, "discount": 0, "price_final": 660}, {"name": "–ú–æ–ª–∏ –•—É–∞ –ß–∞", "type": null, "weight": 100, "price_original": 140, "discount": 0, "price_final": 140}, {"name": "–ú–æ–ª–∏ –•—É–∞ –ß–∞", "type": null, "weight": 250, "price_original": 270, "discount": 0, "price_final": 270}, {"name": "–°–µ–Ω—á–∞", "type": null, "weight": 100, "price_original": 125, "discount": 0, "price_final": 125}, {"name": "–°–µ–Ω—á–∞", "type": null, "weight": 250, "price_original": 265, "discount": 0, "price_final": 265}], "–§—Ä—É–∫—Ç–æ–≤—ã–π —á–∞–π": [{"name": "–ì–ª–∏–Ω—Ç–≤–µ–π–Ω", "type": null, "weight": 250, "price_original": 620, "discount": 0, "price_final": 620}, {"name": "–ì–ª–∏–Ω—Ç–≤–µ–π–Ω", "type": null, "weight": 100, "price_original": 285, "discount": 0, "price_final": 285}, {"name": "–î–µ—Ä–∑–∫–∏–π —Ñ—Ä—É–∫—Ç", "type": null, "weight": 100, "price_original": 230, "discount": 0, "price_final": 230}, {"name": "–î–µ—Ä–∑–∫–∏–π —Ñ—Ä—É–∫—Ç", "type": null, "weight": 250, "price_original": 485, "discount": 0, "price_final": 485}], "–ó–µ–ª–µ–Ω—ã–π —á–∞–π —Å –¥–æ–±–∞–≤–∫–∞–º–∏": [{"name": "–î—ã–Ω—è –ö–∞—Ä–∞–º–µ–ª—å", "type": null, "weight": 100, "price_original": 180, "discount": 0, "price_final": 180}, {"name": "–î—ã–Ω—è –ö–∞—Ä–∞–º–µ–ª—å", "type": null, "weight": 250, "price_original": 395, "discount": 0, "price_final": 395}, {"name": "–õ–∏–ø–æ–≤—ã–π", "type": null, "weight": 100, "price_original": 195, "discount": 0, "price_final": 195}, {"name": "–õ–∏–ø–æ–≤—ã–π", "type": null, "weight": 250, "price_original": 420, "discount": 0, "price_final": 420}, {"name": "–ú–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫", "type": null, "weight": 250, "price_original": 435, "discount": 0, "price_final": 435}, {"name": "–ú–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫", "type": null, "weight": 100, "price_original": 195, "discount": 0, "price_final": 195}], "–£–ª—É–Ω": [{"name": "–ñ–µ–Ω—å—à–µ–Ω—å –£–ª—É–Ω –í—ã–¥–µ—Ä–∂–∞–Ω–Ω—ã–π", "type": null, "weight": 250, "price_original": 370, "discount": 0, "price_final": 370}, {"name": "–¢–µ–≥—É–∞–Ω—å–∏–Ω—å", "type": null, "weight": 250, "price_original": 475, "discount": 0, "price_final": 475}, {"name": "–¢–µ–≥—É–∞–Ω—å–∏–Ω—å", "type": null, "weight": 100, "price_original": 215, "discount": 0, "price_final": 215}, {"name": "–£–ª—É–Ω –ú–æ–ª–æ—á–Ω—ã–π", "type": null, "weight": 100, "price_original": 200, "discount": 0, "price_final": 200}, {"name": "–£–ª—É–Ω –ú–æ–ª–æ—á–Ω—ã–π", "type": null, "weight": 250, "price_original": 435, "discount": 0, "price_final": 435}], "–ö–∞—Å–∫–∞—Ä–∞": [{"name": "–ö–∞—Å–∫–∞—Ä–∞ –ö–æ—Å—Ç–∞-–†–∏–∫–∞", "type": null, "weight": 100, "price_original": 330, "discount": 0, "price_final": 330}], "–ü—É—ç—Ä": [{"name": "–ü—É—ç—Ä –î–≤–æ—Ä—Ü–æ–≤—ã–π", "type": null, "weight": 100, "price_original": 255, "discount": 0, "price_final": 255}, {"name": "–ü—É—ç—Ä –î–≤–æ—Ä—Ü–æ–≤—ã–π", "type": null, "weight": 250, "price_original": 585, "discount": 0, "price_final": 585}, {"name": "–ü—É—ç—Ä –Æ–Ω–Ω–∞–Ω—å 3 –≥–æ–¥–∞", "type": null, "weight": 100, "price_original": 170, "discount": 0, "price_final": 170}, {"name": "–ü—É—ç—Ä –Æ–Ω–Ω–∞–Ω—å 3 –≥–æ–¥–∞", "type": null, "weight": 250, "price_original": 375, "discount": 0, "price_final": 375}]}, "–ö–û–§–ï –î–õ–Ø –§–ò–õ–¨–¢–†–ê": {"–°–º–µ—Å–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞": [{"name": "–ë–∞—Ç—á-–ë—Ä—é", "type": "ground_coffee", "weight": 250, "price_original": 630, "discount": 30, "price_final": 441}, {"name": "–ë–∞—Ç—á-–ë—Ä—é", "type": "bean_coffee", "weight": 250, "price_original": 630, "discount": 30, "price_final": 441}, {"name": "–ë–∞—Ç—á-–ë—Ä—é", "type": "bean_coffee", "weight": 1000, "price_original": 2400, "discount": 30, "price_final": 1680}, {"name": "–ë–∞—Ç—á-–ë—Ä—é –ì–µ–π—à–∞-–±–ª–µ–Ω–¥", "type": "bean_coffee", "weight": 250, "price_original": 1518, "discount": 30, "price_final": 1062}, {"name": "–ë–∞—Ç—á-–ë—Ä—é –ì–µ–π—à–∞-–±–ª–µ–Ω–¥", "type": "ground_coffee", "weight": 250, "price_original": 1518, "discount": 30, "price_final": 1062}, {"name": "–ë–∞—Ç—á-–ë—Ä—é –ì–µ–π—à–∞-–±–ª–µ–Ω–¥", "type": "bean_coffee", "weight": 1000, "price_original": 5950, "discount": 30, "price_final": 4165}, {"name": "–ö–ª–∏–Ω –°–∫–∏–Ω", "type": "bean_coffee", "weight": 1000, "price_original": 2150, "discount": 30, "price_final": 1505}, {"name": "–ö–ª–∏–Ω –°–∫–∏–Ω", "type": "bean_coffee", "weight": 250, "price_original": 568, "discount": 30, "price_final": 397}, {"name": "–ö–ª–∏–Ω –°–∫–∏–Ω", "type": "ground_coffee", "weight": 250, "price_original": 568, "discount": 30, "price_final": 397}], "–ú–æ–Ω–æ—Å–æ—Ä—Ç–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞": [{"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°—É–ª—å-–¥–µ-–ú–∏–Ω–∞—Å", "type": "bean_coffee", "weight": 1000, "price_original": 2350, "discount": 30, "price_final": 1645}, {"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°—É–ª—å-–¥–µ-–ú–∏–Ω–∞—Å", "type": "bean_coffee", "weight": 250, "price_original": 618, "discount": 30, "price_final": 432}, {"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°—É–ª—å-–¥–µ-–ú–∏–Ω–∞—Å", "type": "ground_coffee", "weight": 250, "price_original": 618, "discount": 30, "price_final": 432}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –°–∞–Ω—Ç—å—è–≥–æ", "type": "bean_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –°–∞–Ω—Ç—å—è–≥–æ", "type": "ground_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –°–∞–Ω—Ç—å—è–≥–æ", "type": "bean_coffee", "weight": 1000, "price_original": 2450, "discount": 30, "price_final": 1715}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –°—É–º–∞—Ç—Ä–∞ –ì–∞–π–æ", "type": "bean_coffee", "weight": 250, "price_original": 743, "discount": 30, "price_final": 520}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –°—É–º–∞—Ç—Ä–∞ –ì–∞–π–æ", "type": "ground_coffee", "weight": 250, "price_original": 743, "discount": 30, "price_final": 520}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –°—É–º–∞—Ç—Ä–∞ –ì–∞–π–æ", "type": "bean_coffee", "weight": 1000, "price_original": 2850, "discount": 30, "price_final": 1995}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": "ground_coffee", "weight": 250, "price_original": 693, "discount": 30, "price_final": 485}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": "bean_coffee", "weight": 250, "price_original": 693, "discount": 30, "price_final": 485}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": "bean_coffee", "weight": 1000, "price_original": 2650, "discount": 30, "price_final": 1855}, {"name": "–ö–æ–ª—É–º–±–∏—è –£–∏–ª–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2450, "discount": 30, "price_final": 1715}, {"name": "–ö–æ–ª—É–º–±–∏—è –£–∏–ª–∞", "type": "bean_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–ö–æ–ª—É–º–±–∏—è –£–∏–ª–∞", "type": "ground_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≤—É", "type": "bean_coffee", "weight": 1000, "price_original": 2450, "discount": 30, "price_final": 1715}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≤—É", "type": "bean_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≤—É", "type": "ground_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": "bean_coffee", "weight": 1000, "price_original": 1722.5, "discount": 0, "price_final": 1722}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": "bean_coffee", "weight": 250, "price_original": 450.5, "discount": 0, "price_final": 450}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": "ground_coffee", "weight": 250, "price_original": 450.5, "discount": 0, "price_final": 450}]}, "–î–†–ò–ü-–ö–û–§–ï": {"–ú–ò–ö–†–û–õ–û–¢–´ –í –î–†–ò–ü–ê–• –ü–û 10 –®–¢": [{"name": "–ë–æ–ª–∏–≤–∏—è –ö–∞—Ä–∞–Ω–∞–≤–∏", "type": null, "weight": 182, "price_original": 570, "discount": 0, "price_final": 570}, {"name": "–ë—É—Ä—É–Ω–¥–∏ –ù–∫–∏–∑–∏", "type": null, "weight": 178, "price_original": 460, "discount": 0, "price_final": 460}, {"name": "–ö–µ–Ω–∏—è –ú—á–∞–Ω–∞", "type": null, "weight": 185, "price_original": 530, "discount": 0, "price_final": 530}, {"name": "–ö–µ–Ω–∏—è –†–∏–∞–∫–∏–±–µ—Ä—É", "type": null, "weight": 180, "price_original": 500, "discount": 0, "price_final": 500}, {"name": "–ö–æ–ª—É–º–±–∏—è –ü–µ—Ä—Å–∏–∫ –•–∞–π—Ä–æ –ê—Ä—á–∏–ª–∞", "type": null, "weight": 178, "price_original": 680, "discount": 0, "price_final": 680}, {"name": "–ö–æ–ª—É–º–±–∏—è –ß–∏—Ä–æ–∑–æ –ö–∞—Å–∞ –ù–µ–≥—Ä–∞", "type": null, "weight": 180, "price_original": 680, "discount": 0, "price_final": 680}, {"name": "–ö–æ–ª—É–º–±–∏—è –≠–ª—å –¢—Ä–∏—É–Ω—Ñ–æ", "type": null, "weight": 185, "price_original": 640, "discount": 0, "price_final": 640}, {"name": "–£–≥–∞–Ω–¥–∞ –ù—å—è–±–∏—Ä–æ–Ω–≥–æ", "type": null, "weight": 181, "price_original": 480, "discount": 0, "price_final": 480}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ë–∏–±–∏—Å–∞", "type": null, "weight": 179, "price_original": 490, "discount": 0, "price_final": 490}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ò—Å–∞–∞–∫ –¢–µ—Å—Ñ–∞–π", "type": null, "weight": 181, "price_original": 480, "discount": 0, "price_final": 480}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ú—É–∫–µ—Ä–∞ 120 —á–∞—Å–æ–≤", "type": null, "weight": 180, "price_original": 540, "discount": 0, "price_final": 540}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ú—É–∫–µ—Ä–∞ 200 —á–∞—Å–æ–≤", "type": null, "weight": 180, "price_original": 540, "discount": 0, "price_final": 540}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ú—É–∫–µ—Ä–∞ –ò—Å—Ç", "type": null, "weight": 180, "price_original": 530, "discount": 0, "price_final": 530}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ß–µ–ª–µ–ª–µ–∫—Ç—É", "type": null, "weight": 180, "price_original": 490, "discount": 0, "price_final": 490}], "–î–†–ò–ü–´ –ü–û 50 –®–¢": [{"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°—É–ª—å-–¥–µ-–ú–∏–Ω–∞—Å", "type": null, "weight": 784, "price_original": 1650, "discount": 0, "price_final": 1650}, {"name": "–ë—ç—Ä—Ä–∏", "type": null, "weight": 790, "price_original": 1700, "discount": 0, "price_final": 1700}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –°–∞–Ω—Ç—å—è–≥–æ", "type": null, "weight": 794, "price_original": 1740, "discount": 0, "price_final": 1740}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –°—É–º–∞—Ç—Ä–∞ –ì–∞–π–æ", "type": null, "weight": 814, "price_original": 1940, "discount": 0, "price_final": 1940}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": null, "weight": 800, "price_original": 1850, "discount": 0, "price_final": 1850}, {"name": "–ö–æ–ª—É–º–±–∏—è –î–µ–∫–∞—Ñ", "type": null, "weight": 805, "price_original": 2030, "discount": 0, "price_final": 2030}, {"name": "–ö–æ–ª—É–º–±–∏—è –£–∏–ª–∞", "type": null, "weight": 797, "price_original": 1720, "discount": 0, "price_final": 1720}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≤—É", "type": null, "weight": 810, "price_original": 1720, "discount": 0, "price_final": 1720}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": null, "weight": 807, "price_original": 1810, "discount": 0, "price_final": 1810}], "–î–†–ò–ü–´ –ü–û 30 –®–¢": [{"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°—É–ª—å-–¥–µ-–ú–∏–Ω–∞—Å", "type": null, "weight": 560, "price_original": 1090, "discount": 0, "price_final": 1090}, {"name": "–ë—ç—Ä—Ä–∏", "type": null, "weight": 540, "price_original": 1050, "discount": 0, "price_final": 1050}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –°–∞–Ω—Ç—å—è–≥–æ", "type": null, "weight": 572, "price_original": 1120, "discount": 0, "price_final": 1120}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –°—É–º–∞—Ç—Ä–∞ –ì–∞–π–æ", "type": null, "weight": 560, "price_original": 1250, "discount": 0, "price_final": 1250}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": null, "weight": 544, "price_original": 1200, "discount": 0, "price_final": 1200}, {"name": "–ö–æ–ª—É–º–±–∏—è –î–µ–∫–∞—Ñ", "type": null, "weight": 560, "price_original": 1330, "discount": 0, "price_final": 1330}, {"name": "–ö–æ–ª—É–º–±–∏—è –£–∏–ª–∞", "type": null, "weight": 560, "price_original": 1140, "discount": 0, "price_final": 1140}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≤—É", "type": null, "weight": 560, "price_original": 1120, "discount": 0, "price_final": 1120}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": null, "weight": 540, "price_original": 1180, "discount": 0, "price_final": 1180}], "–î–†–ò–ü–´ –ü–û 10 –®–¢": [{"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°—É–ª—å-–¥–µ-–ú–∏–Ω–∞—Å", "type": null, "weight": 180, "price_original": 400, "discount": 0, "price_final": 400}, {"name": "–ë—ç—Ä—Ä–∏", "type": null, "weight": 173, "price_original": 380, "discount": 0, "price_final": 380}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –°–∞–Ω—Ç—å—è–≥–æ", "type": null, "weight": 180, "price_original": 420, "discount": 0, "price_final": 420}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –°—É–º–∞—Ç—Ä–∞ –ì–∞–π–æ", "type": null, "weight": 179, "price_original": 470, "discount": 0, "price_final": 470}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": null, "weight": 173, "price_original": 430, "discount": 0, "price_final": 430}, {"name": "–ö–æ–ª—É–º–±–∏—è –î–µ–∫–∞—Ñ", "type": null, "weight": 173, "price_original": 480, "discount": 0, "price_final": 480}, {"name": "–ö–æ–ª—É–º–±–∏—è –£–∏–ª–∞", "type": null, "weight": 173, "price_original": 410, "discount": 0, "price_final": 410}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≤—É", "type": null, "weight": 180, "price_original": 410, "discount": 0, "price_final": 410}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": null, "weight": 180, "price_original": 430, "discount": 0, "price_final": 430}], "–ù–ê–ë–û–†–´ –î–†–ò–ü–û–í": [{"name": "–ú–∏–∫—Å, 20 —à—Ç", "type": null, "weight": 379, "price_original": 950, "discount": 0, "price_final": 950}]}, "–ö–û–§–ï –î–õ–Ø –≠–°–ü–†–ï–°–°–û": {"–ú–∏–∫—Ä–æ–ª–æ—Ç—ã –¥–ª—è —ç—Å–ø—Ä–µ—Å—Å–æ": [{"name": "–ë–æ–ª–∏–≤–∏—è –õ–æ—Å –†–æ–¥—Ä–∏–≥–µ—Å –ü–∏–±–µ—Ä—Ä–∏", "type": "bean_coffee", "weight": 250, "price_original": 793, "discount": 30, "price_final": 555}, {"name": "–ë–æ–ª–∏–≤–∏—è –õ–æ—Å –†–æ–¥—Ä–∏–≥–µ—Å –ü–∏–±–µ—Ä—Ä–∏", "type": "bean_coffee", "weight": 1000, "price_original": 3050, "discount": 30, "price_final": 2135}, {"name": "–ë—Ä–∞–∑–∏–ª–∏—è –¢—Ä–µ—Å-–ü–æ–Ω—Ç–∞—Å", "type": "bean_coffee", "weight": 250, "price_original": 668, "discount": 30, "price_final": 467}, {"name": "–ë—Ä–∞–∑–∏–ª–∏—è –¢—Ä–µ—Å-–ü–æ–Ω—Ç–∞—Å", "type": "bean_coffee", "weight": 1000, "price_original": 2550, "discount": 30, "price_final": 1785}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –Ø–≤–∞ –ê—Ç–∏–∫", "type": "bean_coffee", "weight": 250, "price_original": 730, "discount": 30, "price_final": 511}, {"name": "–ò–Ω–¥–æ–Ω–µ–∑–∏—è –Ø–≤–∞ –ê—Ç–∏–∫", "type": "bean_coffee", "weight": 1000, "price_original": 2800, "discount": 30, "price_final": 1960}, {"name": "–ö–µ–Ω–∏—è –ì–∞—á–∞—Ç–∞", "type": "bean_coffee", "weight": 250, "price_original": 768, "discount": 30, "price_final": 537}, {"name": "–ö–µ–Ω–∏—è –ì–∞—á–∞—Ç–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2950, "discount": 30, "price_final": 2065}, {"name": "–ö–µ–Ω–∏—è –ù—å–µ—Ä–∏ –•–∏–ª–ª", "type": "bean_coffee", "weight": 250, "price_original": 805, "discount": 30, "price_final": 563}, {"name": "–ö–µ–Ω–∏—è –ù—å–µ—Ä–∏ –•–∏–ª–ª", "type": "bean_coffee", "weight": 1000, "price_original": 3100, "discount": 30, "price_final": 2170}, {"name": "–ö–æ–ª—É–º–±–∏—è –ò–Ω–∑–∞", "type": "bean_coffee", "weight": 250, "price_original": 755, "discount": 30, "price_final": 528}, {"name": "–ö–æ–ª—É–º–±–∏—è –ò–Ω–∑–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2900, "discount": 30, "price_final": 2030}, {"name": "–ö–æ–ª—É–º–±–∏—è –õ–∞ –õ–µ–æ–Ω–∞", "type": "bean_coffee", "weight": 250, "price_original": 743, "discount": 30, "price_final": 520}, {"name": "–ö–æ–ª—É–º–±–∏—è –õ–∞ –õ–µ–æ–Ω–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2850, "discount": 30, "price_final": 1995}, {"name": "–ö–æ–ª—É–º–±–∏—è –õ—É—Å–∏–∞–Ω–æ –≠—Å–ø–∏–Ω–æ—Å–∞", "type": "bean_coffee", "weight": 250, "price_original": 743, "discount": 30, "price_final": 520}, {"name": "–ö–æ–ª—É–º–±–∏—è –õ—É—Å–∏–∞–Ω–æ –≠—Å–ø–∏–Ω–æ—Å–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2850, "discount": 30, "price_final": 1995}, {"name": "–ö–æ–ª—É–º–±–∏—è –ú–∞—Ä–∞–∫–∞–π", "type": "bean_coffee", "weight": 250, "price_original": 743, "discount": 30, "price_final": 520}, {"name": "–ö–æ–ª—É–º–±–∏—è –ú–∞—Ä–∞–∫–∞–π", "type": "bean_coffee", "weight": 1000, "price_original": 2850, "discount": 30, "price_final": 1995}, {"name": "–ö–æ–ª—É–º–±–∏—è –≠–ª—å –ò–Ω–¥–∏–æ", "type": "bean_coffee", "weight": 250, "price_original": 755, "discount": 30, "price_final": 528}, {"name": "–ö–æ–ª—É–º–±–∏—è –≠–ª—å –ò–Ω–¥–∏–æ", "type": "bean_coffee", "weight": 1000, "price_original": 2900, "discount": 30, "price_final": 2030}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –ì–∞–π—è –ê—Ä—Ç–∏–∑–∞–Ω", "type": "bean_coffee", "weight": 250, "price_original": 843, "discount": 30, "price_final": 590}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –ì–∞–π—è –ê—Ä—Ç–∏–∑–∞–Ω", "type": "bean_coffee", "weight": 1000, "price_original": 3250, "discount": 30, "price_final": 2275}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –õ–∞ –†–æ—Ç–æ–Ω–¥–∞", "type": "bean_coffee", "weight": 250, "price_original": 868, "discount": 30, "price_final": 607}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –õ–∞ –†–æ—Ç–æ–Ω–¥–∞", "type": "bean_coffee", "weight": 1000, "price_original": 3350, "discount": 30, "price_final": 2345}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –õ–∞ –§–∏–ª–∞", "type": "bean_coffee", "weight": 250, "price_original": 855, "discount": 30, "price_final": 598}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –õ–∞ –§–∏–ª–∞", "type": "bean_coffee", "weight": 1000, "price_original": 3300, "discount": 30, "price_final": 2310}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –°–∞–Ω –•—É–∞–Ω–∏–ª—å–æ", "type": "bean_coffee", "weight": 250, "price_original": 868, "discount": 30, "price_final": 607}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –°–∞–Ω –•—É–∞–Ω–∏–ª—å–æ", "type": "bean_coffee", "weight": 1000, "price_original": 3350, "discount": 30, "price_final": 2345}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∞–±—É–µ", "type": "bean_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∞–±—É–µ", "type": "bean_coffee", "weight": 1000, "price_original": 2750, "discount": 30, "price_final": 1925}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì–µ—Ä–∏ –ê–Ω–∞—ç—Ä–æ–±–Ω—ã–π", "type": "bean_coffee", "weight": 250, "price_original": 843, "discount": 30, "price_final": 590}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì–µ—Ä–∏ –ê–Ω–∞—ç—Ä–æ–±–Ω—ã–π", "type": "bean_coffee", "weight": 1000, "price_original": 3250, "discount": 30, "price_final": 2275}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì–æ—Ç–∏—Ç–∏", "type": "bean_coffee", "weight": 250, "price_original": 705, "discount": 30, "price_final": 493}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì–æ—Ç–∏—Ç–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2700, "discount": 30, "price_final": 1890}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –î—É–ª–∞ –ú–∞–∑–æ—Ä–∏—è", "type": "bean_coffee", "weight": 250, "price_original": 730, "discount": 30, "price_final": 511}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –î—É–ª–∞ –ú–∞–∑–æ—Ä–∏—è", "type": "bean_coffee", "weight": 1000, "price_original": 2800, "discount": 30, "price_final": 1960}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ú—É–∫–µ—Ä–∞ 72 —á–∞—Å–∞", "type": "bean_coffee", "weight": 250, "price_original": 843, "discount": 30, "price_final": 590}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ú—É–∫–µ—Ä–∞ 72 —á–∞—Å–∞", "type": "bean_coffee", "weight": 1000, "price_original": 3250, "discount": 30, "price_final": 2275}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–æ–ª–æ–º–æ–Ω –ì–µ—Ç—É", "type": "bean_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–æ–ª–æ–º–æ–Ω –ì–µ—Ç—É", "type": "bean_coffee", "weight": 1000, "price_original": 2750, "discount": 30, "price_final": 1925}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –£—Ä–∞–≥–∞", "type": "bean_coffee", "weight": 250, "price_original": 730, "discount": 30, "price_final": 511}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –£—Ä–∞–≥–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2800, "discount": 30, "price_final": 1960}], "–ú–æ–Ω–æ—Å–æ—Ä—Ç–∞ –¥–ª—è —ç—Å–ø—Ä–µ—Å—Å–æ": [{"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°–µ—Ä—Ä–∞–¥–æ", "type": "bean_coffee", "weight": 1000, "price_original": 2300, "discount": 30, "price_final": 1610}, {"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°–µ—Ä—Ä–∞–¥–æ", "type": "bean_coffee", "weight": 250, "price_original": 605, "discount": 30, "price_final": 423}, {"name": "–ë—Ä–∞–∑–∏–ª–∏—è –°–µ—Ä—Ä–∞–¥–æ", "type": "ground_coffee", "weight": 250, "price_original": 605, "discount": 30, "price_final": 423}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –§—É—ç–≥–æ", "type": "bean_coffee", "weight": 1000, "price_original": 2500, "discount": 30, "price_final": 1750}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –§—É—ç–≥–æ", "type": "bean_coffee", "weight": 250, "price_original": 655, "discount": 30, "price_final": 458}, {"name": "–ì–≤–∞—Ç–µ–º–∞–ª–∞ –§—É—ç–≥–æ", "type": "ground_coffee", "weight": 250, "price_original": 655, "discount": 30, "price_final": 458}, {"name": "–ö–µ–Ω–∏—è –ù–∞–π—Ä–æ–±–∏", "type": "bean_coffee", "weight": 250, "price_original": 705, "discount": 30, "price_final": 493}, {"name": "–ö–µ–Ω–∏—è –ù–∞–π—Ä–æ–±–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2700, "discount": 30, "price_final": 1890}, {"name": "–ö–µ–Ω–∏—è –ù–∞–π—Ä–æ–±–∏", "type": "ground_coffee", "weight": 250, "price_original": 705, "discount": 30, "price_final": 493}, {"name": "–ö–æ–ª—É–º–±–∏—è –ë–æ–≥–æ—Ç–∞", "type": "bean_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–ö–æ–ª—É–º–±–∏—è –ë–æ–≥–æ—Ç–∞", "type": "ground_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–ö–æ–ª—É–º–±–∏—è –ë–æ–≥–æ—Ç–∞", "type": "bean_coffee", "weight": 1000, "price_original": 2450, "discount": 30, "price_final": 1715}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –°–∞–Ω-–•–æ—Å–µ", "type": "bean_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –°–∞–Ω-–•–æ—Å–µ", "type": "ground_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–ö–æ—Å—Ç–∞-–†–∏–∫–∞ –°–∞–Ω-–•–æ—Å–µ", "type": "bean_coffee", "weight": 1000, "price_original": 2750, "discount": 30, "price_final": 1925}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≥–∞–ª–∏", "type": "bean_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≥–∞–ª–∏", "type": "ground_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≥–∞–ª–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2450, "discount": 30, "price_final": 1715}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì—É–¥–∂–∏", "type": "bean_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì—É–¥–∂–∏", "type": "ground_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì—É–¥–∂–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2750, "discount": 30, "price_final": 1925}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ò—Ä–≥–∞—á–µ—Ñ—Ñ", "type": "bean_coffee", "weight": 1000, "price_original": 2350, "discount": 30, "price_final": 1645}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ò—Ä–≥–∞—á–µ—Ñ—Ñ", "type": "bean_coffee", "weight": 250, "price_original": 618, "discount": 30, "price_final": 432}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ò—Ä–≥–∞—á–µ—Ñ—Ñ", "type": "ground_coffee", "weight": 250, "price_original": 618, "discount": 30, "price_final": 432}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –û—Ä–æ–º–∏—è", "type": "bean_coffee", "weight": 1000, "price_original": 2600, "discount": 30, "price_final": 1820}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –û—Ä–æ–º–∏—è", "type": "bean_coffee", "weight": 250, "price_original": 680, "discount": 30, "price_final": 476}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –û—Ä–æ–º–∏—è", "type": "ground_coffee", "weight": 250, "price_original": 680, "discount": 30, "price_final": 476}], "–ö–æ—Ñ–µ –±–µ–∑ –∫–æ—Ñ–µ–∏–Ω–∞": [{"name": "–ö–æ–ª—É–º–±–∏—è –î–µ–∫–∞—Ñ", "type": "bean_coffee", "weight": 1000, "price_original": 3000, "discount": 30, "price_final": 2100}, {"name": "–ö–æ–ª—É–º–±–∏—è –î–µ–∫–∞—Ñ", "type": "bean_coffee", "weight": 250, "price_original": 780, "discount": 30, "price_final": 546}, {"name": "–ö–æ–ª—É–º–±–∏—è –î–µ–∫–∞—Ñ", "type": "ground_coffee", "weight": 250, "price_original": 780, "discount": 30, "price_final": 546}], "–°–º–µ—Å–∏ –¥–ª—è —ç—Å–ø—Ä–µ—Å—Å–æ": [{"name": "–§–∞–Ω–∫–∏", "type": "bean_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–§–∞–Ω–∫–∏", "type": "ground_coffee", "weight": 250, "price_original": 718, "discount": 30, "price_final": 502}, {"name": "–§–∞–Ω–∫–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2750, "discount": 30, "price_final": 1925}, {"name": "–§–ª–æ—Ä–∞–ª", "type": "bean_coffee", "weight": 1000, "price_original": 2550, "discount": 30, "price_final": 1785}, {"name": "–§–ª–æ—Ä–∞–ª", "type": "bean_coffee", "weight": 250, "price_original": 668, "discount": 30, "price_final": 467}, {"name": "–§–ª–æ—Ä–∞–ª", "type": "ground_coffee", "weight": 250, "price_original": 668, "discount": 30, "price_final": 467}, {"name": "–§—Ä—É—Ç—Ç–∏", "type": "bean_coffee", "weight": 250, "price_original": 655, "discount": 30, "price_final": 458}, {"name": "–§—Ä—É—Ç—Ç–∏", "type": "ground_coffee", "weight": 250, "price_original": 655, "discount": 30, "price_final": 458}, {"name": "–§—Ä—É—Ç—Ç–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2500, "discount": 30, "price_final": 1750}]}, "–ö–û–§–ï –î–õ–Ø –ú–û–õ–û–ß–ù–´–• –ù–ê–ü–ò–¢–ö–û–í": {"–°–º–µ—Å–∏ –¥–ª—è –º–æ–ª–æ—á–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤": [{"name": "–ë—Ä–∞—É–Ω–∏", "type": "bean_coffee", "weight": 250, "price_original": 693, "discount": 30, "price_final": 485}, {"name": "–ë—Ä–∞—É–Ω–∏", "type": "ground_coffee", "weight": 250, "price_original": 693, "discount": 30, "price_final": 485}, {"name": "–ë—Ä–∞—É–Ω–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2650, "discount": 30, "price_final": 1855}, {"name": "–ë—ç—Ä—Ä–∏", "type": "bean_coffee", "weight": 250, "price_original": 401.7, "discount": 0, "price_final": 401}, {"name": "–ë—ç—Ä—Ä–∏", "type": "ground_coffee", "weight": 250, "price_original": 401.7, "discount": 0, "price_final": 401}, {"name": "–ë—ç—Ä—Ä–∏", "type": "bean_coffee", "weight": 1000, "price_original": 1527.5, "discount": 0, "price_final": 1527}, {"name": "–ö—ç–Ω–¥–∏", "type": "bean_coffee", "weight": 250, "price_original": 630, "discount": 30, "price_final": 441}, {"name": "–ö—ç–Ω–¥–∏", "type": "ground_coffee", "weight": 250, "price_original": 630, "discount": 30, "price_final": 441}, {"name": "–ö—ç–Ω–¥–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2400, "discount": 30, "price_final": 1680}, {"name": "–ù–∞—Ç—Ç–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2300, "discount": 30, "price_final": 1610}, {"name": "–ù–∞—Ç—Ç–∏", "type": "ground_coffee", "weight": 250, "price_original": 605, "discount": 30, "price_final": 423}, {"name": "–ù–∞—Ç—Ç–∏", "type": "bean_coffee", "weight": 250, "price_original": 605, "discount": 30, "price_final": 423}, {"name": "–•–∞–Ω–∏", "type": "bean_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–•–∞–Ω–∏", "type": "ground_coffee", "weight": 250, "price_original": 643, "discount": 30, "price_final": 450}, {"name": "–•–∞–Ω–∏", "type": "bean_coffee", "weight": 1000, "price_original": 2450, "discount": 30, "price_final": 1715}, {"name": "–Ø–≥–æ–¥–Ω—ã–π –¥–∂–µ–º", "type": "bean_coffee", "weight": 250, "price_original": 818, "discount": 30, "price_final": 572}, {"name": "–Ø–≥–æ–¥–Ω—ã–π –¥–∂–µ–º", "type": "ground_coffee", "weight": 250, "price_original": 818, "discount": 30, "price_final": 572}, {"name": "–Ø–≥–æ–¥–Ω—ã–π –¥–∂–µ–º", "type": "bean_coffee", "weight": 1000, "price_original": 3150, "discount": 30, "price_final": 2205}]}, "–ö–ê–ü–°–£–õ–´": {"–ö–∞–ø—Å—É–ª—ã Nespresso –ø–æ 10 —à—Ç": [{"name": "–ë—Ä–∞—É–Ω–∏", "type": null, "weight": 83, "price_original": 280, "discount": 0, "price_final": 280}, {"name": "–ë—ç—Ä—Ä–∏", "type": null, "weight": 82, "price_original": 260, "discount": 0, "price_final": 260}, {"name": "–ö–æ–ª—É–º–±–∏—è –ë–æ–≥–æ—Ç–∞", "type": null, "weight": 82, "price_original": 280, "discount": 0, "price_final": 280}, {"name": "–ö—ç–Ω–¥–∏", "type": null, "weight": 82, "price_original": 270, "discount": 0, "price_final": 270}, {"name": "–ù–∞—Ç—Ç–∏", "type": null, "weight": 83, "price_original": 260, "discount": 0, "price_final": 260}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≥–∞–ª–∏", "type": null, "weight": 83, "price_original": 270, "discount": 0, "price_final": 270}, {"name": "–§–ª–æ—Ä–∞–ª", "type": null, "weight": 83, "price_original": 270, "discount": 0, "price_final": 270}, {"name": "–§—Ä—É—Ç—Ç–∏", "type": null, "weight": 83, "price_original": 270, "discount": 0, "price_final": 270}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì—É–¥–∂–∏", "type": null, "weight": 82, "price_original": 280, "discount": 0, "price_final": 280}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –û—Ä–æ–º–∏—è", "type": null, "weight": 83, "price_original": 280, "discount": 0, "price_final": 280}], "–ö–∞–ø—Å—É–ª—ã Nespresso –ø–æ 40 —à—Ç": [{"name": "–ë—Ä–∞—É–Ω–∏", "type": null, "weight": 370, "price_original": 1070, "discount": 0, "price_final": 1070}, {"name": "–ë—ç—Ä—Ä–∏", "type": null, "weight": 370, "price_original": 1020, "discount": 0, "price_final": 1020}, {"name": "–ö–æ–ª—É–º–±–∏—è –ë–æ–≥–æ—Ç–∞", "type": null, "weight": 370, "price_original": 1030, "discount": 0, "price_final": 1030}, {"name": "–ö—ç–Ω–¥–∏", "type": null, "weight": 370, "price_original": 1020, "discount": 0, "price_final": 1020}, {"name": "–ù–∞—Ç—Ç–∏", "type": null, "weight": 370, "price_original": 1010, "discount": 0, "price_final": 1010}, {"name": "–†—É–∞–Ω–¥–∞ –ö–∏–≥–∞–ª–∏", "type": null, "weight": 370, "price_original": 1010, "discount": 0, "price_final": 1010}, {"name": "–§–ª–æ—Ä–∞–ª", "type": null, "weight": 370, "price_original": 1030, "discount": 0, "price_final": 1030}, {"name": "–§—Ä—É—Ç—Ç–∏", "type": null, "weight": 370, "price_original": 1040, "discount": 0, "price_final": 1040}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –ì—É–¥–∂–∏", "type": null, "weight": 370, "price_original": 1040, "discount": 0, "price_final": 1040}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –û—Ä–æ–º–∏—è", "type": null, "weight": 370, "price_original": 1050, "discount": 0, "price_final": 1050}], "–ù–∞–±–æ—Ä—ã –∫–∞–ø—Å—É–ª Nespresso": [{"name": "–ú–∏–∫—Å", "type": null, "weight": 370, "price_original": 1050, "discount": 0, "price_final": 1050}]}, "–†–ê–°–¢–í–û–†–ò–ú–´–ô –°–ü–ï–®–ï–õ–¢–ò": {"–†–ê–°–¢–í–û–†–ò–ú–´–ô –°–ü–ï–®–ï–õ–¢–ò –ü–û 9 –®–¢": [{"name": "–ë—ç—Ä—Ä–∏", "type": null, "weight": 97, "price_original": 730, "discount": 0, "price_final": 730}, {"name": "–ö–µ–Ω–∏—è –ú–∞—É–Ω—Ç", "type": null, "weight": 97, "price_original": 750, "discount": 0, "price_final": 750}, {"name": "–§–∞–Ω–∫–∏", "type": null, "weight": 97, "price_original": 830, "discount": 0, "price_final": 830}, {"name": "–≠—Ñ–∏–æ–ø–∏—è –°–∏–¥–∞–º–æ", "type": null, "weight": 97, "price_original": 750, "discount": 0, "price_final": 750}]}};

    let cart = {};
    let productCounter = 0;
    let user = null;
    const MAX_QTY = 10;
    const GRIND_LEVELS = [
      {value: "–≥—Ä—É–±—ã–π", text: "–ì—Ä—É–±—ã–π (–§—Ä–µ–Ω—á-–ø—Ä–µ—Å—Å)"},
      {value: "—Å—Ä–µ–¥–Ω–∏–π", text: "–°—Ä–µ–¥–Ω–∏–π (–î—Ä–∏–ø/–ü—É—Ä–æ–≤–µ—Ä)"},
      {value: "–º–µ–ª–∫–∏–π", text: "–ú–µ–ª–∫–∏–π (–≠—Å–ø—Ä–µ—Å—Å–æ/–¢—É—Ä–∫–∞)"}
    ];

    // --- Init Logic ---
    function initWebApp() {
        if (window.Telegram && window.Telegram.WebApp) {
            const tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand(); 

            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                user = tg.initDataUnsafe.user;
                const name = user.first_name || user.username || "–¥—Ä—É–≥";
                document.getElementById('userName').textContent = `–ü—Ä–∏–≤–µ—Ç, ${name}! –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ñ–µ ‚òï`;
            } else {
                document.getElementById('userName').textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ñ–µ ‚òï";
            }

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.addEventListener('click', handleSubmit);
            
            renderMenu();
        } else {
            document.getElementById('userName').textContent = "–†–µ–∂–∏–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞";
            document.getElementById('submitBtn').addEventListener('click', handleSubmit);
            renderMenu();
        }
    }

    function updateButtonState() {
        const hasItems = Object.values(cart).some(item => item.qty > 0);
        const submitBtn = document.getElementById('submitBtn');
        const commentContainer = document.getElementById('commentContainer');

        if(submitBtn) {
            submitBtn.disabled = !hasItems;
            submitBtn.textContent = hasItems ? `–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑` : "–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞";
        }
        
        const clearBtn = document.getElementById('clearBtn');
        if(clearBtn) clearBtn.style.display = hasItems ? 'block' : 'none';
        
        // Show comment field only if there are items
        if(commentContainer) commentContainer.style.display = hasItems ? 'block' : 'none';
    }

    function renderMenu() {
        const menuDiv = document.getElementById('menu');
        menuDiv.innerHTML = '';

        for (const [category, subcats] of Object.entries(menuData)) {
          const catDetails = document.createElement('details');
          const catSummary = document.createElement('summary');
          catSummary.textContent = category;
          catDetails.appendChild(catSummary);
          
          for (const [subcat, products] of Object.entries(subcats)) {
            const subDetails = document.createElement('details');
            const subSummary = document.createElement('summary');
            subSummary.textContent = subcat;
            subDetails.appendChild(subSummary);
            
            products.forEach(product => {
              const prodId = `prod_${productCounter++}`;
              const prodDiv = document.createElement('div');
              prodDiv.className = 'product';

              const discountHtml = product.discount > 0 ?
                `<span class="original-price">${product.price_original} ‚ÇΩ</span><span style="color:var(--muted);margin-left:4px;font-size:12px">-${product.discount}%</span>` : '';

              prodDiv.innerHTML = `
                <div class="left">
                  <h4>${product.name} - ${product.weight}–≥</h4>
                  <div class="metaSmall">${product.description || ''}</div>
                </div>
                <div class="right">
                  <div style="display:flex;align-items:center;gap:8px">
                    <div class="price">${product.price_final} ‚ÇΩ ${discountHtml}</div>
                  </div>
                  ${product.type === 'ground_coffee' ?
                    `<div class="grind-select"><select id="grind_${prodId}">
                      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–º–æ–ª...</option>
                      ${GRIND_LEVELS.map(level => `<option value="${level.value}">${level.text}</option>`).join('')}
                    </select></div>` : ''
                  }
                  <div class="quantity">
                    <button type="button" onclick="changeQty('${prodId}', -1)">-</button>
                    <span id="qty_${prodId}">0</span>
                    <button type="button" onclick="changeQty('${prodId}', 1)">+</button>
                  </div>
                </div>
              `;

              subDetails.appendChild(prodDiv);

              cart[prodId] = {
                qty: 0,
                grind: '',
                name: product.name,
                price: product.price_final,
                weight: product.weight, // Weight stored here
                type: product.type
              };

              const grindSelect = prodDiv.querySelector(`#grind_${prodId}`);
              if (grindSelect) {
                grindSelect.addEventListener('change', (e) => {
                  cart[prodId].grind = e.target.value;
                  if (cart[prodId].qty > 0) updateCart(); 
                });
              }
            });

            catDetails.appendChild(subDetails);
          }

          menuDiv.appendChild(catDetails);
        }

        updateButtonState();
      }

      window.changeQty = function(prodId, delta) {
        const item = cart[prodId];
        if (!item) return;

        if (delta > 0 && item.type === 'ground_coffee') {
            const grindSelect = document.querySelector(`#grind_${prodId}`);
            if (grindSelect && !grindSelect.value) {
                if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.showAlert) { 
                    window.Telegram.WebApp.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–º–æ–ª –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º.'); 
                } else {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–º–æ–ª.');
                }
                grindSelect.style.borderColor = 'red';
                setTimeout(() => grindSelect.style.borderColor = 'rgba(16,24,40,0.06)', 2000);
                return;
            }
        }

        const newQty = Math.max(0, Math.min(MAX_QTY, item.qty + delta));

        if (newQty !== item.qty) {
            item.qty = newQty;
            document.getElementById(`qty_${prodId}`).textContent = newQty;
            updateCart();
        }
      };

      window.clearCart = function() {
        if (confirm("–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?")) {
          Object.keys(cart).forEach(prodId => {
            cart[prodId].qty = 0;
            cart[prodId].grind = '';
            
            const qtySpan = document.getElementById(`qty_${prodId}`);
            if (qtySpan) qtySpan.textContent = 0;
            
            const grindSelect = document.querySelector(`#grind_${prodId}`);
            if (grindSelect) grindSelect.value = '';
          });
          updateCart();
          document.getElementById('orderComment').value = ''; // Clear comment
        }
      };

      function updateCart() {
        const cartList = document.getElementById('cart_list');
        const totalSpan = document.getElementById('total');
        cartList.innerHTML = '';
        let total = 0;
        Object.entries(cart).forEach(([id, item]) => {
          if (item.qty > 0) {
            const li = document.createElement('li');
            li.className = 'cart-item';
            const grindText = item.grind ? ` (${item.grind})` : '';
            li.innerHTML = `<span>${item.name} x${item.qty}${grindText}</span><span>${item.price * item.qty} ‚ÇΩ</span>`;
            cartList.appendChild(li);
            total += item.price * item.qty;
          }
        });
        totalSpan.textContent = total;
        updateButtonState();
      }

      function handleSubmit() {
        let name = '–ì–æ—Å—Ç—å';
        if (user && user.first_name) name = user.first_name;
        
        const comment = document.getElementById('orderComment').value;

        try {
            let totalWeight = 0;

            const items = Object.values(cart).filter(item => item.qty > 0).map(item => {
                if (item.type === 'ground_coffee' && !item.grind) {
                    throw new Error(`–£–∫–∞–∂–∏—Ç–µ –ø–æ–º–æ–ª –¥–ª—è: ${item.name}`);
                }
                
                // Calculate total weight for the order
                const itemWeight = (item.weight || 0) * item.qty;
                totalWeight += itemWeight;

                return {
                    name: item.name,
                    quantity: item.qty,
                    weight: item.weight, // Sending single item weight
                    total_item_weight: itemWeight, // Sending total weight for this line item
                    price: item.price,
                    type: item.type,
                    grind_level: item.grind || undefined
                };
            });

            if (items.length === 0) return;

            const data = {
                name,
                user_id: user?.id || null,
                comment: comment, 
                items,
                total_weight: totalWeight, 
                total_price: parseFloat(document.getElementById('total').textContent) || 0
            };

            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.sendData(JSON.stringify(data));
            }
        } catch (err) {
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.showAlert(err.message);
            } else {
                alert(err.message);
            }
        }
      }
      
      initWebApp();
  </script>
</body>
</html>
